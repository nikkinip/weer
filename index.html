<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <title>UV & Weer App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 2rem;
            max-width: 600px;
            margin: auto;
            background: #f0f8ff;
        }

        h1 {
            text-align: center;
            margin-bottom: 2rem;
        }

        input,
        select,
        button {
            padding: 0.75rem;
            margin-top: 1rem;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        button {
            background-color: #007BFF;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        .box {
            margin-top: 2rem;
            background: #ffffff;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        #weerinfo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        #weericoon {
            flex-shrink: 0;
        }

        #weericoon img {
            width: 60px;
            height: 60px;
        }

        #weertekst {
            flex: 1;
        }

        strong {
            color: #007BFF;
        }

        h3 {
            margin-top: 0;
        }
    </style>
</head>

<body>
    <h1>üå§ UV & Weer App</h1>

    <input type="text" id="plaats" placeholder="Voer plaats in (bijv. Amsterdam)">

    <select id="huidtype">
        <option value="1">Huidtype 1 - Zeer licht</option>
        <option value="2">Huidtype 2 - Licht</option>
        <option value="3">Huidtype 3 - Licht getint</option>
        <option value="4">Huidtype 4 - Getint</option>
        <option value="5">Huidtype 5 - Donker</option>
        <option value="6">Huidtype 6 - Zeer donker</option>
    </select>

    <button onclick="haalUVData()">Zoek UV & Weer</button>

    <div id="resultaat" class="box"></div>
    <div id="advies" class="box"></div>

    <script>
        async function haalUVData() {
            const plaats = document.getElementById('plaats').value;
            const huidtype = parseInt(document.getElementById('huidtype').value);

            const locatieResp = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${plaats}`);
            const locatieData = await locatieResp.json();
            if (!locatieData[0]) {
                document.getElementById('resultaat').innerText = "Locatie niet gevonden.";
                return;
            }

            const lat = locatieData[0].lat;
            const lng = locatieData[0].lon;

            // OpenUV API
            const uvResp = await fetch(`https://api.openuv.io/api/v1/uv?lat=${lat}&lng=${lng}`, {
                headers: {
                    "x-access-token": "openuv-1rmfhrmcegy3ps-io"
                }
            });
            const uvData = await uvResp.json();
            const uvIndex = uvData.result.uv;

            // OpenWeatherMap API
            const weerResp = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&units=metric&lang=nl&appid=bd5e378503939ddaee76f12ad7a97608`);
            const weerData = await weerResp.json();

            const temperatuur = weerData.main.temp;
            const weerBeschrijving = weerData.weather[0].description;
            const icon = weerData.weather[0].icon;

            const zonsopkomst = new Date(weerData.sys.sunrise * 1000).toLocaleTimeString('nl-NL');
            const zonsondergang = new Date(weerData.sys.sunset * 1000).toLocaleTimeString('nl-NL');

            document.getElementById('resultaat').innerHTML = `
        <h3>üìç Locatie: ${plaats}</h3>
        <div id="weerinfo">
          <div id="weericoon">
            <img src="https://openweathermap.org/img/wn/${icon}@2x.png" alt="weericoon">
          </div>
          <div id="weertekst">
            <p>üå°Ô∏è <strong>Temperatuur:</strong> ${temperatuur}¬∞C</p>
            <p>üå•Ô∏è <strong>Weer:</strong> ${weerBeschrijving}</p>
            <p>üîÜ <strong>UV-index:</strong> ${uvIndex.toFixed(1)}</p>
            <p>üçÉ <strong>Wind:</strong> ${weerData.wind.speed} m/s, richting ${weerData.wind.deg}¬∞</p>
            <p>üåÖ <strong>Zonsopkomst:</strong> ${zonsopkomst}</p>
            <p>üåá <strong>Zonsondergang:</strong> ${zonsondergang}</p>
          </div>
        </div>
      `;

            let advies = "";
            if (uvIndex <= 2) {
                advies = "Geen bescherming nodig.";
            } else if (uvIndex <= 5) {
                advies = "Smeer je in, vooral bij lichte huid.";
                if (huidtype <= 2) advies += " Jij hebt een gevoelige huid, dus wees extra voorzichtig.";
            } else if (uvIndex <= 7) {
                advies = "Smeer om de 2 uur, draag zonnebril en hoed.";
            } else if (uvIndex <= 10) {
                advies = "Zoek schaduw, smeer om het uur, draag beschermende kleding.";
            } else {
                advies = "Blijf zoveel mogelijk uit de zon!";
            }

            let spf = "SPF 15";
            if (uvIndex > 5) spf = "SPF 30";
            if (uvIndex > 7 || huidtype <= 2) spf = "SPF 50+";
            advies += `<br><strong>Aanbevolen zonnebrand:</strong> ${spf}`;

            document.getElementById('advies').innerHTML = `<strong>Advies:</strong> ${advies}`;
        }
    </script>
</body>

</html>