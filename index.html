<!DOCTYPE html>
<html lang="nl">

<head>
  <meta charset="UTF-8">
  <title>UV & Weer App</title>
  <link rel="stylesheet" href="weer.css">


  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.clouds.min.js"></script>

</head>

<body>
  <div id="vanta-bg"></div>

  <h1 id="titel">üå§ UV & Weer App</h1>
  <input type="text" id="plaats" placeholder="Voer plaats in (bijv. Amsterdam)">
  <select id="huidtype">
    <option value="1">Huidtype 1 - Zeer licht</option>
    <option value="2">Huidtype 2 - Licht</option>
    <option value="3">Huidtype 3 - Licht getint</option>
    <option value="4">Huidtype 4 - Getint</option>
    <option value="5">Huidtype 5 - Donker</option>
    <option value="6">Huidtype 6 - Zeer donker</option>
  </select>
  <button onclick="haalUVData()">Zoek UV & Weer</button>

  <div id="resultaat" class="box"></div>
  <div id="advies" class="box"></div>

  <script>
    async function haalUVData() {
      const plaats = document.getElementById('plaats').value;
      const huidtype = parseInt(document.getElementById('huidtype').value);

      const locatieResp = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${plaats}`);
      const locatieData = await locatieResp.json();
      if (!locatieData[0]) {
        document.getElementById('resultaat').innerText = "Locatie niet gevonden.";
        return;
      }

      const lat = locatieData[0].lat;
      const lng = locatieData[0].lon;

      // OpenUV API
      const uvResp = await fetch(`https://api.openuv.io/api/v1/uv?lat=${lat}&lng=${lng}`, {
        headers: {
          "x-access-token": "openuv-1rmfhrmcek1vva-io"
        }
      });
      const uvData = await uvResp.json();
      const uvIndex = uvData.result.uv;

      // OpenWeatherMap API
      const weerResp = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&units=metric&lang=nl&appid=bd5e378503939ddaee76f12ad7a97608`);
      const weerData = await weerResp.json();

      const temperatuur = weerData.main.temp;
      const weerBeschrijving = weerData.weather[0].description;
      const icon = weerData.weather[0].icon;
      const zonsopkomst = new Date(weerData.sys.sunrise * 1000).toLocaleTimeString('nl-NL');
      const zonsondergang = new Date(weerData.sys.sunset * 1000).toLocaleTimeString('nl-NL');

      document.getElementById('resultaat').innerHTML = `
        <h3>üìç Locatie: ${plaats}</h3>
        <div id="weerinfo">
          <div id="weericoon">
            <img src="https://openweathermap.org/img/wn/${icon}@2x.png" alt="weericoon">
          </div>
          <div id="weertekst">
            <p> <strong>Temperatuur:</strong> ${temperatuur}¬∞C</p>
            <p> <strong>Weer:</strong> ${weerBeschrijving}</p>
            <p> <strong>UV-index:</strong> ${uvIndex.toFixed(1)}</p>
            <p> <strong>Wind:</strong> ${weerData.wind.speed} m/s, richting ${weerData.wind.deg}¬∞</p>
            <p> <strong>Zonsopkomst:</strong> ${zonsopkomst}</p>
            <p> <strong>Zonsondergang:</strong> ${zonsondergang}</p>
          </div>
        </div>
      `;

      let advies = "";
      if (uvIndex <= 2) {
        advies = "Geen bescherming nodig.";
      } else if (uvIndex <= 5) {
        advies = "Smeer je in, vooral bij lichte huid.";
        if (huidtype <= 2) advies += " Jij hebt een gevoelige huid, dus wees extra voorzichtig.";
      } else if (uvIndex <= 7) {
        advies = "Smeer om de 2 uur, draag zonnebril en hoed.";
      } else if (uvIndex <= 10) {
        advies = "Zoek schaduw, smeer om het uur, draag beschermende kleding.";
      } else {
        advies = "Blijf zoveel mogelijk uit de zon!";
      }

      // SPF advies
      let spf = "SPF 15";
      if (uvIndex > 5) spf = "SPF 30";
      if (uvIndex > 7 || huidtype <= 2) spf = "SPF 50+";
      advies += `<br><strong>Aanbevolen zonnebrand:</strong> ${spf}`;

      document.getElementById('advies').innerHTML = `<strong>Advies:</strong> ${advies}`;
    }
  </script>

  <script>
    VANTA.CLOUDS({
      el: "#vanta-bg",
      mouseControls: true,
      touchControls: true,
      gyroControls: false,
      minHeight: 200.00,
      minWidth: 200.00,
      backgroundColor: 0xffffff,
      skyColor: 0x68b8d7,
      cloudColor: 0xadc1de,
      cloudShadowColor: 0x183550,
      sunColor: 0xff9919,
      sunGlareColor: 0xff6633,
      sunlightColor: 0xff9933,
      speed: 1.00
    });
  </script>
</body>

</html>
